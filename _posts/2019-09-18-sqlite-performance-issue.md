---
layout: post
title:  "Sqlite 3.7.11 에서 쿼리 성능저하 현상"
date:   2019-09-17 11:31:00 +0530
---

Android 개발 중 같은 Select 쿼리를 수행했을 때 Sqlite 3.7.11 인 단말에서 수행시간이 더 오래 걸리는 현상이 있었다.
동일한 쿼리를 수행했음에도 Sqlite 3.8 이상에서는 1.6초, Sqlite 3.7.11 에서는 14초 정보가 걸렸다.

여러 테스트를 진행하던 중 서브 쿼리를 사용하는 대신에 메인쿼리와 서브쿼리를 각각 수행하도록 변경해보았다.
다시 말해 서브쿼리를 먼저 수행하고 그 결과를 메인쿼리에 넣어서 수행하도록 변경하였더니 14초에서 2초대로 줄어들었다.

Sqlite 버전에 따라 내부에서 서브 쿼리를 처리하는 방식이 다른 것으로 추측된다. 
혹시 Sqlite 3.7.11에서는 서브쿼리가 있을 때 이중 for문과 같은 형식으로 동작하는건가...
